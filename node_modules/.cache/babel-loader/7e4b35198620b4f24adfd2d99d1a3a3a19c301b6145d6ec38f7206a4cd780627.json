{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\n\n//create action\nc;\n//read action\nexport const showUser = createAsyncThunk('showuser', async (args, _ref) => {\n  let {\n    rejectWithValue\n  } = _ref;\n  console.log(\"args=\", args);\n  const response = await fetch(\"https://641dd63d945125fff3d75742.mockapi.io/crud\");\n  try {\n    const result = await response.json();\n    return result;\n  } catch (error) {\n    return rejectWithValue(error);\n  }\n});\n\n//delete\nexport const deleteUser = createAsyncThunk('deletuser', async (id, _ref2) => {\n  let {\n    rejectWithValue\n  } = _ref2;\n  const response = await fetch(`https://641dd63d945125fff3d75742.mockapi.io/crud/${id}`, {\n    method: \"DELETE\"\n  });\n  try {\n    const result = await response.json();\n    console.log(\"deleted user=\", result);\n    return result;\n  } catch (error) {\n    return rejectWithValue(error);\n  }\n});\nexport const userDetail = createSlice({\n  name: \"userDetail\",\n  initialState: {\n    users: [],\n    loading: false,\n    error: null\n  },\n  reducers: {},\n  extraReducers: {\n    //Create users\n    [createUser.pending]: state => {\n      state.loading = true;\n    },\n    [createUser.fulfilled]: (state, action) => {\n      state.loading = false;\n      state.users.push(action.payload);\n    },\n    [createUser.rejected]: (state, action) => {\n      state.loading = false;\n      state.error = action.payload.message;\n    },\n    //Read Users\n    [showUser.pending]: state => {\n      state.loading = true;\n    },\n    [showUser.fulfilled]: (state, action) => {\n      state.loading = false;\n      state.users = action.payload;\n    },\n    [showUser.rejected]: (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    },\n    //Delete users\n    [deleteUser.pending]: state => {\n      state.loading = true;\n    },\n    [deleteUser.fulfilled]: (state, action) => {\n      state.loading = false;\n      const {\n        id\n      } = action.payload;\n      if (id) {\n        state.users = state.users.filter(ele => ele.id !== id);\n      }\n    },\n    [deleteUser.rejected]: (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    }\n  }\n});\nexport default userDetail.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","c","showUser","args","_ref","rejectWithValue","console","log","response","fetch","result","json","error","deleteUser","id","_ref2","method","userDetail","name","initialState","users","loading","reducers","extraReducers","createUser","pending","state","fulfilled","action","push","payload","rejected","message","filter","ele","reducer"],"sources":["/home/sid/React/CRUD/my-app/src/features/userDetailSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\n\n//create action\nc\n//read action\nexport const showUser=createAsyncThunk(\n  'showuser',\n  async(args,{rejectWithValue})=>{\n    console.log(\"args=\",args)\n    const response=await fetch(\"https://641dd63d945125fff3d75742.mockapi.io/crud\")\n   \n     try{\n      const result=await response.json()\n      return result;\n     }\n     catch(error){\n      return rejectWithValue(error);\n     }\n\n  }\n  )\n\n\n  //delete\n  export const deleteUser=createAsyncThunk(\n    'deletuser',\n    async(id,{rejectWithValue})=>{\n      const response=await fetch(`https://641dd63d945125fff3d75742.mockapi.io/crud/${id}`,\n      {method:\"DELETE\"}\n      );\n      try{\n        const result= await response.json();\n        console.log(\"deleted user=\",result)\n        return result;\n      }\n      catch(error){\n        return rejectWithValue(error);\n      }\n    }\n  );\n\nexport const userDetail=createSlice({\n  name:\"userDetail\",\n  initialState:{\n    users:[],\n    loading:false,\n    error:null,\n  },\n  reducers:{},\n  extraReducers:{\n\n    //Create users\n    [createUser.pending]:(state)=>{\n      state.loading=true;\n    },\n    [createUser.fulfilled]:(state,action)=>{\n      state.loading=false;\n      state.users.push(action.payload);\n    },\n    [createUser.rejected]:(state,action)=>{\n      state.loading=false;\n      state.error=action.payload.message;\n    },\n\n    //Read Users\n    [showUser.pending]: (state) => {\n      state.loading = true;\n    },\n    [showUser.fulfilled]: (state, action) => {\n      state.loading = false;\n      state.users = action.payload;\n    },\n    [showUser.rejected]: (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    },\n    \n    //Delete users\n    [deleteUser.pending]:(state)=>{\n      state.loading=true;\n     \n    },\n    [deleteUser.fulfilled]:(state,action)=>{\n      state.loading=false;\n      const {id}=action.payload;\n      if(id){\n        state.users=state.users.filter((ele)=>ele.id !==id);\n      }\n    },\n    [deleteUser.rejected]:(state,action)=>{\n      state.loading=false;\n      state.error=action.payload;\n    }\n\n  },\n})\n\nexport default userDetail.reducer;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}