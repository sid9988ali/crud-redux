{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\n\n//create action\nexport const createUser = createAsyncThunk('createuser', async (data, _ref) => {\n  let {\n    rejectWithValue\n  } = _ref;\n  console.log(\"data=\", data);\n  const response = await fetch(\"https://641dd63d945125fff3d75742.mockapi.io/crud\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(data)\n  });\n  try {\n    const result = await response.json();\n    return result;\n  } catch (error) {\n    return rejectWithValue(error);\n  }\n});\n//read action\nexport const showUser = createAsyncThunk('showuser', async (args, _ref2) => {\n  let {\n    rejectWithValue\n  } = _ref2;\n  console.log(\"args=\", args);\n  const response = await fetch(\"https://641dd63d945125fff3d75742.mockapi.io/crud\");\n  try {\n    const result = await response.json();\n    return result;\n  } catch (error) {\n    return rejectWithValue(error);\n  }\n});\n\n//delete\nexport const deleteUser = createAsyncThunk('deletuser', async (id, _ref3) => {\n  let {\n    rejectWithValue\n  } = _ref3;\n  const response = await fetch(`https://641dd63d945125fff3d75742.mockapi.io/crud/${id}`, {\n    method: \"DELETE\"\n  });\n  try {\n    const result = await response.json();\n    console.log(\"deleted user=\", result);\n    return result;\n  } catch (error) {\n    return rejectWithValue(error);\n  }\n});\nexport const userDetail = createSlice({\n  name: \"userDetail\",\n  initialState: {\n    users: [],\n    loading: false,\n    error: null\n  },\n  reducers: {},\n  extraReducers: {\n    //Create users\n    [createUser.pending]: state => {\n      state.loading = true;\n    },\n    [createUser.fulfilled]: (state, action) => {\n      state.loading = false;\n      state.users.push(action.payload);\n    },\n    [createUser.rejected]: (state, action) => {\n      state.loading = false;\n      state.error = action.payload.message;\n    },\n    //Read Users\n    [showUser.pending]: state => {\n      state.loading = true;\n    },\n    [showUser.fulfilled]: (state, action) => {\n      state.loading = false;\n      state.users = action.payload;\n    },\n    [showUser.rejected]: (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    },\n    //Delete users\n    [deleteUser.pending]: state => {\n      state.loading = true;\n    },\n    [deleteUser.fulfilled]: (state, action) => {\n      state.loading = false;\n      const {\n        id\n      } = action.payload;\n      if (id) {\n        state.users = state.users.filter(ele => ele.id !== id);\n      }\n    },\n    [deleteUser.rejected]: (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    }\n  }\n});\nexport default userDetail.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","createUser","data","_ref","rejectWithValue","console","log","response","fetch","method","headers","body","JSON","stringify","result","json","error","showUser","args","_ref2","deleteUser","id","_ref3","userDetail","name","initialState","users","loading","reducers","extraReducers","pending","state","fulfilled","action","push","payload","rejected","message","filter","ele","reducer"],"sources":["/home/sid/React/CRUD/my-app/src/features/userDetailSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\n\n//create action\nexport const createUser=createAsyncThunk(\n  'createuser',\n  async(data,{rejectWithValue})=>{\n    console.log(\"data=\",data)\n    const response=await fetch(\"https://641dd63d945125fff3d75742.mockapi.io/crud\",\n    {\n      method:\"POST\",\n      headers:{\"Content-Type\":\"application/json\",},\n      body:JSON.stringify(data),\n    });\n    try{\n      const result=await response.json()\n      return result;\n    }\n    catch(error){\n      return rejectWithValue(error);\n\n    }\n  }\n)\n//read action\nexport const showUser=createAsyncThunk(\n  'showuser',\n  async(args,{rejectWithValue})=>{\n    console.log(\"args=\",args)\n    const response=await fetch(\"https://641dd63d945125fff3d75742.mockapi.io/crud\")\n   \n     try{\n      const result=await response.json()\n      return result;\n     }\n     catch(error){\n      return rejectWithValue(error);\n     }\n\n  }\n  )\n\n\n  //delete\n  export const deleteUser=createAsyncThunk(\n    'deletuser',\n    async(id,{rejectWithValue})=>{\n      const response=await fetch(`https://641dd63d945125fff3d75742.mockapi.io/crud/${id}`,\n      {method:\"DELETE\"}\n      );\n      try{\n        const result= await response.json();\n        console.log(\"deleted user=\",result)\n        return result;\n      }\n      catch(error){\n        return rejectWithValue(error);\n      }\n    }\n  );\n\n  \n\nexport const userDetail=createSlice({\n  name:\"userDetail\",\n  initialState:{\n    users:[],\n    loading:false,\n    error:null,\n  },\n  reducers:{},\n  extraReducers:{\n\n    //Create users\n    [createUser.pending]:(state)=>{\n      state.loading=true;\n    },\n    [createUser.fulfilled]:(state,action)=>{\n      state.loading=false;\n      state.users.push(action.payload);\n    },\n    [createUser.rejected]:(state,action)=>{\n      state.loading=false;\n      state.error=action.payload.message;\n    },\n\n    //Read Users\n    [showUser.pending]: (state) => {\n      state.loading = true;\n    },\n    [showUser.fulfilled]: (state, action) => {\n      state.loading = false;\n      state.users = action.payload;\n    },\n    [showUser.rejected]: (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    },\n    \n    //Delete users\n    [deleteUser.pending]:(state)=>{\n      state.loading=true;\n     \n    },\n    [deleteUser.fulfilled]:(state,action)=>{\n      state.loading=false;\n      const {id}=action.payload;\n      if(id){\n        state.users=state.users.filter((ele)=>ele.id !==id);\n      }\n    },\n    [deleteUser.rejected]:(state,action)=>{\n      state.loading=false;\n      state.error=action.payload;\n    }\n\n  },\n})\n\nexport default userDetail.reducer;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}